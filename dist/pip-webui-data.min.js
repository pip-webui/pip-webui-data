!function(e){"use strict";e.module("pipData",["pipDataConfig","pipDataDocument","pipDataAvatar","pipDataPicture","pipDataUser","pipDataParty","pipDataSession","pipDataUser","pipDataSettings","pipCacheTag","pipDataTag","pipCacheAnnouncement","pipDataAnnouncement","pipCacheFeedback","pipDataFeedback","pipCacheImageSet","pipDataImageSets","pipCacheGuide","pipDataGuide","pipCacheTip","pipDataTip"])}(window.angular),function(){"use strict";var e=angular.module("pipDataAnnouncement",["pipRest","pipDataModel","pipCacheAnnouncement"]);e.provider("pipDataAnnouncement",function(){this.readAnnouncesResolver=function(){return["$stateParams","pipRest","pipEnums",function(e,t,a){return t.announces().query().$promise}]},this.readCompletedAnnouncesResolver=function(){return["$stateParams","pipRest","pipEnums",function(e,t,a){return t.announces().query({status:a.EXECUTION_STATUS.COMPLETED}).$promise}]},this.readAnnounceResolver=function(){return["$stateParams","pipRest",function(e,t){return t.announces().get({id:e.id}).$promise}]},this.$get=["pipRest","$stateParams","pipDataModel","pipCacheAnnouncement",function(e,t,a,r){return{partyId:e.partyId,readAnnounces:function(a,n,i){return a.resource="announces",a.item=a.item||{},a.item.search=t.search,a.item.tags=t.search,a.item.party_id=e.partyId(t),r.readAnnounces(a,n,i)},updateAnnounce:function(e,t,n){e.resource="announces",e.skipTransactionBegin=!0,e.skipTransactionEnd=!1,a.update(e,r.onAnnounceCreate(e,t),n)},updateAnnounceWithFiles:function(e,t,n){e.skipTransactionEnd=!0,a.saveFiles(e,function(){e.resource="announces",e.skipTransactionBegin=!0,e.skipTransactionEnd=!1,a.update(e,r.onAnnounceUpdate(e,t),n)})},createAnnounceWithFiles:function(e,t,n){e.skipTransactionEnd=!0,a.saveFiles(e,function(){e.resource="announces",e.skipTransactionBegin=!0,e.skipTransactionEnd=!1,a.create(e,r.onAnnounceCreate(e,t),n)})},createAnnounce:function(e,t,n){e.resource="announces",e.skipTransactionBegin=!0,e.skipTransactionEnd=!1,a.create(e,r.onAnnounceCreate(e,t),n)},deleteAnnounce:function(e,t,n){e.resource="announces",a.remove(e,r.onAnnounceDelete(e,t),n)}}}]})}(),function(){"use strict";var e=angular.module("pipDataAvatar",["pipDataConfig","pipDataSession","angularFileUpload"]);e.provider("pipDataAvatar",function(){this.$get=["$http","$upload","pipDataConfig","pipDataSession","pipStrings",function(e,t,a,r,n){function i(e){return e}function s(e){return e}function p(e){var t,r=a.serverUrl();return t=e.type&&e.id&&e.partyId&&("goals"==c[e.type]||"areas"==c[e.type])?r+"/api/parties/"+e.partyId+"/"+c[e.type]+"/"+e.id+"/avatar":r+"/api/parties/"+e.partyId+"/avatar"}var o=["pip-avatar-color-0","pip-avatar-color-1","pip-avatar-color-2","pip-avatar-color-3","pip-avatar-color-4","pip-avatar-color-5","pip-avatar-color-6","pip-avatar-color-7","pip-avatar-color-8","pip-avatar-color-9","pip-avatar-color-10","pip-avatar-color-11","pip-avatar-color-12","pip-avatar-color-13","pip-avatar-color-14","pip-avatar-color-15"],u=["rgba(239,83,80,1)","rgba(236,64,122,1)","rgba(171,71,188,1)","rgba(126,87,194,1)","rgba(92,107,192,1)","rgba(3,169,244,1)","rgba(0,188,212,1)","rgba(0,150,136,1)","rgba(76,175,80,1)","rgba(139,195,74,1)","rgba(205,220,57,1)","rgba(255,193,7,1)","rgba(255,152,0,1)","rgba(255,87,34,1)","rgba(121,85,72,1)","rgba(96,125,139,1)"],c={goal:"goals",objective:"goals",dream:"goals",accomplishment:"goals",area:"areas",overall:"visions",vision:"visions",event:"events",instance:"events"};return{getEntityTypes:function(){return c},getColorClasses:function(){return o},getAvatarColors:function(){return u},getAvatarUrl:function(e){var t=1e3*Math.floor((new Date).getTime()/1e3),a=n.hashCode(e.id)%u.length,r=null,i=null,s="",o=e.noRedirect&&e.noRedirect===!0?"&no_redirect=true":"";if(e.type&&e.id&&e.partyId||e.partyId)if(e.type&&e.id&&e.partyId){if("category"==e.type)return"";e.noDefault||(s="default_template="+e.type+"&bg="+u[a]+"&fg=white&"),"goals"!=c[e.type]&&"areas"!=c[e.type]||(i=p(e)+"?"+s+"timestamp="+t+"&obj_id="+e.id+o)}else e.partyId&&e.partyName?(a=n.hashCode(e.partyId)%u.length,r=(e.partyName[0]||"?").toUpperCase(),e.noDefault||(s="default_template=letter&bg="+u[a]+"&fg=white&chr="+r+"&"),i=p(e)+"?"+s+"timestamp="+t+"&obj_id="+e.partyId+o):!e.partyId||e.type||e.id||(i=p(e)+"?timestamp="+t+"&obj_id="+e.partyId+o);return i},getAvatarPostUrl:function(e,t){var r,n=a.serverUrl();if(e.entityType&&e.id&&e.partyId)r=n+"/api/parties/"+e.partyId+"/"+c[e.entityType]+"/"+e.id+"/avatar";else if(e.partyId&&!e.entityType){if(e.entityType||e.id)return"";r=n+"/api/parties/"+e.partyId+"/avatar"}return r+"?name="+t},deleteAvatar:function(t,a,r){e({method:"DELETE",url:p(t)}).then(a,function(e){r(s(e))})},createAvatar:function(e,a,r,n){return t.http({url:this.getAvatarPostUrl(e.params,e.name),headers:{"Content-Type":e.type},data:e.data}).then(function(e){null!=a&&a(i(e))},function(e){r(s(e))},n)},createAvatarByUrl:function(t,a,r){return e.post(t).success(function(e){null!=a&&a(i(e))}).error(function(e){r(s(e))})}}}]})}(),function(){"use strict";var e=angular.module("pipDataConfig",["pipRest"]);e.provider("pipDataConfig",["pipRestProvider",function(e){e.version("1.0"),this.version=function(t){e.version(t)},this.serverUrlFixed=function(t){e.serverUrlFixed(t)},this.serverUrl=function(t){e.serverUrl(t)},this.$get=["$rootScope","$http","$resource","pipRest",function(e,t,a,r){return{serverUrl:function(e){return r.serverUrl(e)},serverUrlFixed:function(){return r.serverUrlFixed(serverUrlFixed)},about:function(e,t){return r.about().call({},e,t)}}}]}])}(),function(){"use strict";var e=angular.module("pipDataDocument",["pipDataConfig","pipDataSession","angularFileUpload"]);e.provider("pipDataDocument",function(){this.$get=["$http","$upload","pipDataConfig","pipDataSession",function(e,t,a,r){var n=function(e){return e},i=function(e){return e};return{getDocumentUrl:function(e){var t=r.userId(),n=r.partyId()||t;return a.serverUrl()+"/api/parties/"+n+"/files/"+e},getDocumentPostUrl:function(e){var t=r.userId(),n=r.partyId()||t;return a.serverUrl()+"/api/parties/"+n+"/files?name="+e},getDocumentContentUrl:function(e){var t=r.userId(),n=r.partyId()||t;return a.serverUrl()+"/api/parties/"+n+"/files/"+e+"/content"},deleteDocument:function(t,a,r){e({method:"DELETE",url:getDocumentUrl(t)}).then(a,function(e){r(i(e))})},createDocument:function(e,a,r,s){return t.http({url:this.getDocumentPostUrl(e.name),headers:{"Content-Type":e.type},data:e.data}).then(function(e){null!=a&&a(n(e))},function(e){r(i(e))},s)}}}]})}(),function(){"use strict";var e=angular.module("pipDataFeedback",["pipRest","pipDataModel","pipCacheFeedback"]);e.provider("pipDataFeedback",function(){this.readFeedbacksResolver=function(){return["$stateParams","pipRest",function(e,t){return t.feedbacks().query().$promise}]},this.readFeedbackResolver=function(){return["$stateParams","pipRest",function(e,t){return t.feedbacks().get({id:e.id}).$promise}]},this.$get=["$stateParams","pipRest","pipDataModel","pipCacheFeedback",function(e,t,a,r){return{sendFeedback:function(e,t,r){e.resource="feedbacks",a.create(e,t,r)},readFeedbacks:function(a,n,i){return a.resource="feedbacks",a.item=a.item||{},a.item.party_id=t.partyId(e),r.readFeedbacks(a,n,i)},createFeedbackWithFiles:function(e,t,r){e.skipTransactionEnd=!0,a.saveFiles(e,function(){e.resource="feedbacks",e.skipTransactionBegin=!0,e.skipTransactionEnd=!1,a.create(e,t,r)})},updateFeedback:function(e,t,r){e.resource="feedbacks",e.skipTransactionBegin=!0,e.skipTransactionEnd=!1,a.update(e,t,r)},deleteFeedback:function(e,t,r){e.resource="feedbacks",a.remove(e,t,r)}}}]})}(),function(){"use strict";var e=angular.module("pipDataGuide",["pipRest","pipDataModel"]);e.provider("pipDataGuide",function(){this.$get=["pipRest","$stateParams","pipDataModel","pipCacheGuide",function(e,t,a,r){return{partyId:e.partyId,readGuides:function(a,n,i){return a.resource="guides",a.party_id=e.partyId(t),r.readGuides(a,n,i)},readIntroGuides:function(a,n,i){return a.resource="guides",a.party_id=e.partyId(t),a.type="intro",a.status="completed",r.readGuides(a,n,i)},readGuide:function(n,i,s){return n.resource="guides",n.item=n.item||{},n.item.party_id=e.partyId(t),n.item.id=n.item.id||t.id,a.readOne(n,r.onGuideUpdate(n,i),s)},createGuide:function(n,i,s){n.resource="guides",n.item=n.item||{},n.item.party_id=e.partyId(t),a.create(n,r.onGuideCreate(n,i),s)},createGuideWithFiles:function(e,t,n){e.skipTransactionEnd=!0,a.saveFiles(e,function(){e.resource="guides",e.skipTransactionBegin=!0,e.skipTransactionEnd=!1,a.create(e,r.onGuideCreate(e,t),n)})},updateGuide:function(e,t,n){e.resource="guides",e.skipTransactionBegin=!0,e.skipTransactionEnd=!1,a.update(e,r.onGuideUpdate(e,t),n)},updateGuideWithFiles:function(e,t,n){e.skipTransactionEnd=!0,a.saveFiles(e,function(){e.resource="guides",e.skipTransactionBegin=!0,e.skipTransactionEnd=!1,a.update(e,r.onGuideUpdate(e,t),n)})},deleteGuide:function(e,t,n){e.resource="guides",a.remove(e,r.onGuideDelete(e,t),n)}}}]})}(),function(){"use strict";var e=angular.module("pipDataImageSets",["pipRest","pipDataModel","pipCacheImageSet"]);e.provider("pipDataImageSets",function(){var e=15;this.readImageSetsResolver=function(){return["$stateParams","pipRest",function(t,a){return a.image_sets().get({paging:1,skip:0,take:e,search:t.search}).$promise}]},this.readImageSetResolver=function(){return["$stateParams","pipRest",function(e,t){return t.image_sets().get({id:e.id}).$promise}]},this.$get=["pipRest","$stateParams","pipDataModel","pipCacheImageSet",function(t,a,r,n){return{partyId:t.partyId,readImageSets:function(n,i,s,p){return n.resource="image_sets",n.skipTransactionBegin=!0,n.skipTransactionEnd=!1,n.item=n.item||{},n.item.skip=n.item.skip||0,n.item.search=a.search||n.item.search,n.item.party_id=t.partyId(a),n.item.take=e,n.item.paging=1,r.page(n,s,p)},readImageSet:function(e,i,s){return e.resource="image_sets",e.item=e.item||{},e.item.party_id=t.partyId(a),e.item.id=e.item.id||a.id,r.readOne(e,n.onImageSetUpdate(e,i),s)},updateImageSet:function(e,t,a){return e.resource="image_sets",e.skipTransactionBegin=!0,e.skipTransactionEnd=!1,r.update(e,t,a)},createImageSet:function(e,t,a){e.resource="image_sets",e.skipTransactionBegin=!0,e.skipTransactionEnd=!1,r.create(e,n.onImageSetCreate(e,t),a)},createImageSetWithFiles:function(e,t,a){e.skipTransactionEnd=!0,r.saveFiles(e,function(){e.resource="image_sets",e.skipTransactionBegin=!0,e.skipTransactionEnd=!1,r.create(e,n.onImageSetCreate(e,t),a)})},updateImageSetWithFiles:function(e,t,a){e.skipTransactionEnd=!0,r.saveFiles(e,function(){e.resource="image_sets",e.skipTransactionBegin=!0,e.skipTransactionEnd=!1,r.update(e,t,a)})},deleteImageSet:function(e,t,a){e.resource="image_sets",r.remove(e,t,a)}}}]})}(),function(){"use strict";var e=angular.module("pipDataParty",["pipDataConfig","pipRest","pipDataSession"]);e.provider("pipDataParty",function(){this.readPartiesResolver=function(){return["$rootScope","$stateParams","pipRest","pipDataSession",function(e,t,a,r){var n=r.userId(),i=t.party_id||n;if(i!=n)throw"ERROR_NOT_ALLOWED";return a.parties().get({id:i}).$promise}]},this.$get=["pipRest","pipDataConfig",function(e,t){var a=function(e){return e},r=function(e){return e},n=function(e){return e};return{readParty:function(t){return params.resource="parties",params.item=params.item||{},params.item.id=e.partyId($stateParams),pipDataModel.readOne(params,successCallback,errorCallback)},createParty:function(t,n,i){e.parties().update(r(t),function(e){n(a(e))},i)},updateParty:function(t,i,s){e.parties().update(r(t),function(e){i(a(e))},function(e){s(n(e))})},partySettings:function(){return e.partySettings()}}}]})}(),function(){"use strict";var e=angular.module("pipDataPicture",["pipDataConfig","pipDataSession","angularFileUpload"]);e.provider("pipDataPicture",function(){this.$get=["$http","$upload","pipDataConfig","pipDataSession",function(e,t,a,r){function n(e){var t=r.userId(),n=r.partyId()||t;return a.serverUrl()+"/api/parties/"+n+"/files/"+e}function i(e){var t=r.userId(),n=r.partyId()||t;return a.serverUrl()+"/api/parties/"+n+"/files?name="+e}function s(e){var t=r.userId(),n=r.partyId()||t;return a.serverUrl()+"/api/parties/"+n+"/files/"+e+"/content"}function p(t,a,r){e({method:"DELETE",url:n(t)}).then(a,function(e){r(d(e))})}function o(e,a,r,n){return t.http({url:i(e.name),headers:{"Content-Type":e.type},data:e.data}).then(function(e){null!=a&&a(c(e))},function(e){r(d(e))},n)}function u(t,a,r){return e.post(t).success(function(e){null!=a&&a(c(e))}).error(function(e){r(d(e))})}var c=function(e){return e},d=function(e){return e};return{getPictureUrl:n,getPicturePostUrl:i,getPictureContentUrl:s,deletePicture:p,createPicture:o,createPictureByUrl:u}}]})}(),function(){"use strict";var e=angular.module("pipDataSession",["pipDataConfig","pipRest","pipRest.Session"]);e.provider("pipDataSession",function(){this.readSessionsResolver=["$stateParams","pipRest",function(e,t){return t.userSessions().query({party_id:t.partyId(e)}).$promise}],this.readSessionIdResolver=["$stateParams","pipRest",function(e,t){return t.sessionId()}],this.$get=["pipRest","pipSession","pipDataConfig","$stateParams",function(e,t,a,r){var n=function(e){return e},i=function(e){return e};return{signin:function(e,a,r){return t.signin({serverUrl:e.serverUrl,email:e.email,password:e.password,remember:e.remember,adminOnly:!!e.adminOnly},function(e){a(n(e))},function(e){r(i(e))})},open:function(e){return t.open(e.serverUrl,e.user,e.password,e.remember)},signout:function(){return e.signout()},userSessions:function(){return e.userSessions()},userId:function(){return e.userId()},sessionId:function(){return e.sessionId()},partyId:function(){return e.partyId(r)},removeSession:function(t,a,n){e.userSessions().remove({id:t.session.id,party_id:e.partyId(r)},a,function(e){n(i(e))})}}}]})}(),function(){"use strict";var e=angular.module("pipDataSettings",["pipRest","pipSessionData","pipSessionCache","pipDataModel"]);e.provider("pipDataSettings",["pipSessionDataProvider",function(e){this.readSettingsResolver=e.readSettingsResolver,this.$get=["$rootScope","$stateParams","pipRest","pipSessionCache","pipSession","pipDataModel",function(e,t,a,r,n,i){function s(e,t){return r.readSettings(e,t)}function p(e,t){return a.partySettings().get({party_id:n.userId()},function(t){t=t||{},r.onSettingsUpdate(t),e&&e(t)},t).$promise}function o(t,a,s,p){t=a?_.pick(t,a):t,t.party_id=n.userId();var o=_.cloneDeep(e.$settings);r.onSettingsUpdate(t);var u={};u.resource="partySettings",u.item=t,u.item.creator_id=n.userId(),i.create(u,s,function(e){r.onSettingsUpdate(o),p&&p(e)})}return{saveSettings:o,readSettings:s,reReadSettings:p}}]}])}(),function(){"use strict";var e=angular.module("pipDataTag",["pipRest","pipDataModel","pipCacheTag"]);e.provider("pipDataTag",function(){this.readTagsResolver=function(){return["$stateParams","pipRest","pipCacheTag",function(e,t,a){return a.readTags({item:{party_id:t.partyId(e)}})}]},this.$get=["$stateParams","$state","pipRest","pipDataModel","pipCacheTag",function(e,t,a,r,n){return{partyId:a.partyId,readTags:function(t,r,i){return t=t||{},t.item=t.item||{},null==t.item.party_id&&(t.item.party_id=a.partyId(e)),n.readTags(t,r,i)}}}]})}(),function(){"use strict";var e=angular.module("pipDataTip",["pipRest","pipDataModel"]);e.provider("pipDataTip",function(){this.readTipsResolver=function(){return["$stateParams","pipRest",function(e,t){return t.tips().query().$promise}]},this.readTipResolver=function(){return["$stateParams","pipRest",function(e,t){return t.tips().get({id:e.id}).$promise}]},this.$get=["pipRest","$stateParams","pipDataModel","pipCacheTip",function(e,t,a,r){return{partyId:e.partyId,readTips:function(a,n,i){return a.resource="tips",a.item=a.item||{},a.item.search=t.search,a.item.tags=t.search,a.item.party_id=e.partyId(t),r.readTips(a,n,i)},readTip:function(n,i,s){return n.resource="tips",n.item=n.item||{},n.item.party_id=e.partyId(t),n.item.id=n.item.id||t.id,a.readOne(n,r.onTipsUpdate(n,i),s)},createTip:function(n,i,s){n.resource="tips",n.item=n.item||{},n.item.party_id=e.partyId(t),a.create(n,r.onTipCreate(n,i),s)},createTipWithFiles:function(n,i,s){n.skipTransactionEnd=!0,n.item=n.item||{},n.item.party_id=e.partyId(t),a.saveFiles(n,function(){n.resource="tips",n.skipTransactionBegin=!0,n.skipTransactionEnd=!1,n.item.party_id=e.partyId(t),a.create(n,r.onTipCreate(n,i),s)},s)},updateTip:function(n,i,s){n.resource="tips",n.item=n.item||{},n.item.party_id=e.partyId(t),a.update(n,r.onTipUpdate(n,i),s)},updateTipWithFiles:function(n,i,s){n.skipTransactionEnd=!0,n.item=n.item||{},n.item.party_id=e.partyId(t),a.saveFiles(n,function(){n.resource="tips",n.skipTransactionBegin=!0,n.skipTransactionEnd=!1,n.item.party_id=e.partyId(t),a.update(n,r.onTipUpdate(n,i),s)})},deleteTip:function(e,t,n){e.resource="tips",a.remove(e,r.onTipDelete(e,t),n)}}}]})}(),function(){"use strict";var e=angular.module("pipDataUser",["pipDataConfig","pipRest"]);e.provider("pipDataUser",function(){this.$get=["pipRest","pipDataConfig","$stateParams","pipDataModel",function(e,t,a,r){var n=function(e){return e},i=function(e){return{name:e.name,email:e.email,password:e.password,language:e.language,theme:e.theme}},s=function(e){return e};return this.readUsersResolver=function(){return["$stateParams","pipRest",function(e,t){return t.users().page({party_id:e.id,paging:e.paging||1,skip:e.skip||0,take:e.take||15}).$promise}]},this.readUserResolver=function(){return["$stateParams","pipRest",function(e,t){return t.users().get({id:e.id,party_id:t.partyId(e)}).$promise}]},this.readActivitiesUserResolver=["$stateParams","pipRest","$rootScope",function(e,t,a){return t.partyActivities().page({party_id:a.$user.id,paging:1,skip:0,take:25}).$promise}],{signup:function(t,a,r){return e.signup(t.serverUrl).call(i(t),function(e){a(n(e))},function(e){s(s(e))})},recoverPassword:function(t,a,r){return e.recoverPassword(t.serverUrl).call({email:t.email},a,function(e){r(s(e))})},resetPassword:function(t,a,r){return e.resetPassword(t.serverUrl).call({email:t.email,code:t.code,password:t.password},a,function(e){r(s(e))})},changePassword:function(t,a,r){return e.changePassword().call(t,a,function(e){r(s(e))})},requestEmailVerification:function(t,r,n){return e.requestEmailVerification(t.serverUrl).get({party_id:e.partyId(a),email:t.email},r,function(e){n(s(e))})},verifyEmail:function(t,a,r){return e.verifyEmail(t.serverUrl).call({email:t.email,code:t.code},a,function(e){r(s(e))})},signupValidate:function(t,a,r){return e.signupValidate().call({email:t.email},a,r)},currentUser:function(t,a){return e.currentUser().call({},function(e){t(n(e))},function(e){a(s(e))})},readUsers:function(t,r,n,i){return e.users().page({party_id:e.partyId(a),paging:1,skip:t.start||t.item.skip||0,search:t.item.search,active:t.item.active,paid:t.item.paid,admin:t.item.admin,take:15},function(e){n&&n(e)},function(e){i(e)})},readUser:function(t,n,i){return t.resource="users",t.item=t.item||{},t.item.party_id=e.partyId(a),t.item.id=t.item.id||a.id,r.readOne(t,n,i)},updateUser:function(t,a,r){e.users().update(t.item,function(e){a(n(e))},function(e){r(s(e))})}}}]})}(),function(){"use strict";var e=angular.module("pipCacheAnnouncement",["pipDataAnnouncement"]);e.service("pipCacheAnnouncement",["pipEnums","pipDataCache","pipCacheTag",function(e,t,a){function r(e,a,r){return e=e||{},e.resource="announces",e.item=e.item||{},t.retrieveOrLoad(e,a,r)}function n(e,r){return t.addDecorator("announces",e,a.tagsUpdateDecorator(e,r))}function i(e,r){return t.updateDecorator("announces",e,a.tagsUpdateDecorator(e,r))}function s(e,a){return t.removeDecorator("announces",e,a)}return{readAnnounces:r,onAnnounceCreate:n,onAnnounceUpdate:i,onAnnounceDelete:s}}])}(),function(){"use strict";var e=angular.module("pipCacheFeedback",["pipDataFeedback"]);e.service("pipCacheFeedback",["pipEnums","pipDataCache","pipCacheTag",function(e,t,a){function r(e,a,r){return e=e||{},e.resource="feedbacks",e.item=e.item||{},t.retrieveOrLoad(e,a,r)}function n(e,r){return t.addDecorator("feedbacks",e,a.tagsUpdateDecorator(e,r))}function i(e,r){return t.updateDecorator("feedbacks",e,a.tagsUpdateDecorator(e,r))}function s(e,a){return t.removeDecorator("feedbacks",e,a)}return{readFeedbacks:r,onFeedbackCreate:n,onFeedbackUpdate:i,onFeedbackDelete:s}}])}(),function(){"use strict";var e=angular.module("pipCacheGuide",["pipDataGuide","pipCacheTag"]);e.service("pipCacheGuide",["pipEnums","pipDataCache","pipCacheTag",function(e,t,a){function r(e,a,r){return e=e||{},e.resource="guides",e.item=e.item||{},t.retrieveOrLoad(e,a,r)}function n(e,r){return t.addDecorator("guides",e,a.tagsUpdateDecorator(e,r))}function i(e,r){return t.updateDecorator("guides",e,a.tagsUpdateDecorator(e,r))}function s(e,a){return t.removeDecorator("guides",e,a)}return{readGuides:r,onGuideCreate:n,onGuideUpdate:i,onGuideDelete:s}}])}(),function(){"use strict";var e=angular.module("pipCacheImageSet",["pipDataImageSets"]);e.service("pipCacheImageSet",["pipEnums","pipDataCache","pipCacheTag",function(e,t,a){function r(e,a,r){return e=e||{},e.resource="image_sets",e.item=e.item||{},t.retrieveOrLoad(e,a,r)}function n(e,r){return t.addDecorator("image_sets",e,a.tagsUpdateDecorator(e,r))}function i(e,r){return t.updateDecorator("image_sets",e,a.tagsUpdateDecorator(e,r))}function s(e,a){return t.removeDecorator("image_sets",e,a)}return{readImageSets:r,onImageSetCreate:n,onImageSetUpdate:i,onImageSetDelete:s}}])}(),function(){"use strict";var e=angular.module("pipCacheTag",["pipUtils","pipDataCache"]);e.service("pipCacheTag",["pipTags","pipDataCache",function(e,t){function a(a,r){var n=r?e.extractTags(r):[];if(0!=n.length){var i="partyTags";a&&null!==a.party_id&&void 0!==a.party_id?i=i+"_"+a.party_id:a&&a.item&&null!==a.item.party_id&&void 0!==a.item.party_id&&(i=i+"_"+a.item.party_id);var s=t.retrieve(i);s&&(_.each(n,function(t){var a=_.find(s.tags,function(a){return e.equalTags(a.tag,t)});a?(a.tag=t,a.count=a.count+1,a.used=new Date):(s.tags||(s.tags=[]),s.tags.push({tag:t,count:1,used:new Date}))}),t.store(i,s))}}function r(e,t){return function(r){a(e,r),t&&t(r)}}function n(e,a,r){return e.resource="partyTags",e.singleResult=!0,t.retrieveOrLoad(e,a,r)}function i(e,t){return r(e,t)}return{readTags:n,onTagsUpdate:i,tagsUpdateDecorator:r}}])}(),function(){"use strict";var e=angular.module("pipCacheTip",["pipDataTip"]);e.service("pipCacheTip",["pipEnums","pipDataCache","pipCacheTag",function(e,t,a){function r(e,a,r){return e=e||{},e.resource="tips",e.item=e.item||{},t.retrieveOrLoad(e,a,r)}function n(e,r){return t.addDecorator("tips",e,a.tagsUpdateDecorator(e,r))}function i(e,r){return t.updateDecorator("tips",e,a.tagsUpdateDecorator(e,r))}function s(e,a){return t.removeDecorator("tips",e,a)}return{readTips:r,onTipCreate:n,onTipUpdate:i,onTipDelete:s}}])}();